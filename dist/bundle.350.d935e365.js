"use strict";(self.webpackChunkt_zero_user_operation_frontend=self.webpackChunkt_zero_user_operation_frontend||[]).push([[350],{10350:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A}),n(95352);var r=n(37614),a=(n(11125),n(92e3)),o=(n(45654),n(39144)),l=n(87462),i=(n(24713),n(82482)),s=(n(58645),n(71577)),c=(n(47610),n(55026)),u=n(15671),d=n(43144),m=n(97326),p=n(79340),f=n(82963),h=n(61120),g=n(4942),v=(n(10534),n(20924)),b=(n(21384),n(16317)),Z=n(67294),y=n(55609),_=n(93379),k=n.n(_),S=n(82757);k()(S.Z,{insert:"head",singleton:!1});const w=S.Z.locals||{};var E=n(47166),I=n.n(E),L=n(29439),x=b.Z.Option,C=v.Z.TextArea;const O=function(e){var t,n,a,o=e.visible,s=e.submitMap,c=e.userList,u=e.productList,d=e.groupList,m=e.onCancel,p=e.Screening,f=e.cancelUserList,h=i.Z.useForm(),g=(0,L.Z)(h,1)[0];return Z.createElement(r.Z,{visible:o,title:"新增解决方",onCancel:function(){g.resetFields(),c=[],m(),f()},destroyOnClose:!0,onOk:function(){g.validateFields().then((function(e){g.resetFields(),s(e),f()})).catch((function(e){console.log("校验失败:",e)}))}},Z.createElement(i.Z,(0,l.Z)({form:g},{labelCol:{span:5},wrapperCol:{span:18}},{name:"createLessee"}),Z.createElement(i.Z.Item,{label:"解决方名称",name:"solverName",rules:[{required:!0,message:"请输入解决方名称",whitespace:!0}],hasFeedback:!0},Z.createElement(v.Z,{placeholder:"请输入解决方名称"})),Z.createElement(i.Z.Item,{label:"团队",name:"groupId",rules:[{required:!0,message:"请选择团队"}],hasFeedback:!0},Z.createElement(b.Z,{allowClear:!0,showSearch:!0,onChange:function(e){p(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},null===(t=d||[])||void 0===t?void 0:t.map((function(e,t){return Z.createElement(x,{value:e.id,key:t},e.groupName)})))),Z.createElement(i.Z.Item,{label:"主管",name:"administrator",rules:[{required:!0,message:"请选择用户"}],hasFeedback:!0},Z.createElement(b.Z,{allowClear:!0,showSearch:!0},null===(n=c||[])||void 0===n?void 0:n.map((function(e,t){return Z.createElement(x,{value:e.id,key:t},e.nickName||(null==e?void 0:e.username))})))),Z.createElement(i.Z.Item,{label:"产品",name:"businessType",rules:[{required:!0,message:"请选择产品"}],hasFeedback:!0},Z.createElement(b.Z,{allowClear:!0,showSearch:!0},null===(a=u||[])||void 0===a?void 0:a.map((function(e,t){return Z.createElement(x,{value:e.serviceCode,key:t},e.serviceName)})))),Z.createElement(i.Z.Item,{label:"备注",name:"remark"},Z.createElement(C,null))))};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=v.Z.TextArea,N=b.Z.Option;const j=function(e){var t,n,a,o=e.visible,s=e.submitMap,c=e.onCancel,u=e.groupList,d=e.productList,m=e.userList,p=e.currentData,f=(e.Screening,e.cancelUserList),h=i.Z.useForm(),g=(0,L.Z)(h,1)[0],y=null==p||0==p.length?{}:P(P({},p),{},{remark:null==p||null===(t=p.solverDesc)||void 0===t?void 0:t.remark});return g.setFieldsValue(y),Z.createElement(r.Z,{visible:o,title:"编辑产品",onCancel:function(){g.resetFields(),c(),f()},destroyOnClose:!0,onOk:function(){g.validateFields().then((function(e){g.resetFields(),s(e),f()})).catch((function(e){console.log("校验失败:",e)}))}},Z.createElement(i.Z,(0,l.Z)({form:g},{labelCol:{span:5},wrapperCol:{span:18}},{name:"createLessee"}),Z.createElement(i.Z.Item,{label:"解决方名称",name:"solverName",rules:[{required:!0,message:"请输入解决方名称",whitespace:!0}],hasFeedback:!0},Z.createElement(v.Z,{placeholder:"请输入解决方名称"})),Z.createElement(i.Z.Item,{label:"团队",name:"groupId",rules:[{required:!0,message:"请选择团队"}],hasFeedback:!0},Z.createElement(b.Z,{allowClear:!0,showSearch:!0,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},null===(n=u||[])||void 0===n?void 0:n.map((function(e,t){return console.log(t,e),Z.createElement(N,{value:e.id},e.groupName)})))),Z.createElement(i.Z.Item,{label:"主管",name:"administrator",rules:[{required:!0,message:"请选择用户"}],hasFeedback:!0},Z.createElement(b.Z,{allowClear:!0,showSearch:!0},(m||[]).map((function(e,t){return Z.createElement(N,{value:e.id},(null==e?void 0:e.nickName)||(null==e?void 0:e.username))})))),Z.createElement(i.Z.Item,{label:"产品",name:"businessType",rules:[{required:!0,message:"请选择产品"}],hasFeedback:!0},Z.createElement(b.Z,{allowClear:!0,showSearch:!0},null===(a=d||[])||void 0===a?void 0:a.map((function(e,t){return Z.createElement(N,{value:e.serviceCode},e.serviceName)})))),Z.createElement(i.Z.Item,{label:"备注",name:"remark"},Z.createElement(M,null))))};var D,U=n(5582),R=n.n(U);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=I().bind(w),z=b.Z.Option,A=(v.Z.TextArea,(0,y.connect)((function(e){return{global:e.global,solutionManage:e.solutionManage}}))(D=function(e){(0,p.Z)(_,e);var t,n,y=(t=_,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,h.Z)(t);if(n){var a=(0,h.Z)(this).constructor;e=Reflect.construct(r,arguments,a)}else e=r.apply(this,arguments);return(0,f.Z)(this,e)});function _(e){var t;return(0,u.Z)(this,_),t=y.call(this,e),(0,g.Z)((0,m.Z)(t),"searchFormRef",Z.createRef()),(0,g.Z)((0,m.Z)(t),"onReset",(function(){t.searchFormRef.current.resetFields()})),(0,g.Z)((0,m.Z)(t),"cancelUserList",(function(){t.setState({userList:[]})})),(0,g.Z)((0,m.Z)(t),"searchSolutionList",(function(e){var n=t.props.dispatch,r=t.state.dataSource;n({type:"solutionManage/getSolverLists",opt:V(V({},e),{},{currentPage:null==r?void 0:r.currentPage,pageSize:null==r?void 0:r.pageSize}),callback:function(e){var n,r,a,o=null==e||null===(n=e.data)||void 0===n?void 0:n.data;t.setState({dataSource:{dataList:(null==o?void 0:o.list)||[],total:null==o?void 0:o.totalCount,currentPage:null==o||null===(r=o.pagination)||void 0===r?void 0:r.currentPage,pageSize:null==o||null===(a=o.pagination)||void 0===a?void 0:a.pageSize}})}})})),(0,g.Z)((0,m.Z)(t),"changePage",(function(e,n){var r=t.state.dataSource;r.currentPage=e||1,r.pageSize=n,t.setState({dataSource:r}),t.searchSolutionList(t.searchFormRef.current.getFieldsValue())})),(0,g.Z)((0,m.Z)(t),"timeShow",(function(e){return R()(e).utcOffset(8).format("YYYY-MM-DD HH:mm:ss")})),(0,g.Z)((0,m.Z)(t),"timeShow2",(function(e){return R()(e)})),(0,g.Z)((0,m.Z)(t),"handleEditSolver",(function(e){var n=t.props.dispatch,r=t.state.solutionInfo,a=e.administrator,o=e.solverName,l=e.groupId,i=e.productId,s=e.remark;n({type:"solutionManage/modifySolverInfo",opt:{administrator:a,groupId:l,productId:i,solverName:o,id:r.id,solverDesc:{remark:s}},callback:function(e){var n;200==e.data.status?c.ZP.success("修改成功!"):c.ZP.error((null==e||null===(n=e.data)||void 0===n?void 0:n.message)||"修改失败，请重新尝试!"),t.searchSolutionList(t.searchFormRef.current.getFieldsValue())}}),t.handleCancel()})),(0,g.Z)((0,m.Z)(t),"handleDelSolver",(function(){var e=t.state.solutionInfo;(0,t.props.dispatch)({type:"solutionManage/deleteSolverInfo",opt:{solverInfoId:e.id},callback:function(e){var n;200==e.data.status?c.ZP.success("删除成功!"):c.ZP.error((null==e||null===(n=e.data)||void 0===n?void 0:n.message)||"删除失败，请重新尝试!"),t.searchSolutionList(t.searchFormRef.current.getFieldsValue())}}),t.handleCancel()})),(0,g.Z)((0,m.Z)(t),"handleCancel",(function(){t.setState({delSolutionVisible:!1,showAddModal:!1,showEditModal:!1,currentData:{}})})),(0,g.Z)((0,m.Z)(t),"Screening",(function(e){(0,t.props.dispatch)({type:"solutionManage/getGroupUserList",opt:{groupId:e,tenantId:sessionStorage.getItem("tenantId")},callback:function(e){var n,r;t.setState({userList:(null==e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.list)||[]})}})})),(0,g.Z)((0,m.Z)(t),"handleAddSolver",(function(e){var n=e.administrator,r=e.solverName,a=e.groupId,o=e.productId,l=e.remark;(0,t.props.dispatch)({type:"solutionManage/addSolverInfo",opt:{administrator:n,groupId:a,productId:o,solverName:r,businessType:"UNDERGROUND_GARAGE",solverDesc:{remark:l}},callback:function(e){var n;200==e.data.status?c.ZP.success("添加成功!"):c.ZP.error((null==e||null===(n=e.data)||void 0===n?void 0:n.message)||"添加失败，请重新尝试!"),t.searchSolutionList(t.searchFormRef.current.getFieldsValue())}}),t.handleCancel()})),(0,g.Z)((0,m.Z)(t),"getSolverInfo",(function(e){var n=t.props.dispatch,r=t.state.tenantId;console.log("1111111111",e),t.Screening(e.groupId),n({type:"solutionManage/getSolverInfo",opt:{solverInfoId:e.id,tenantId:r},callback:function(e){var n;t.setState({showEditModal:!0,solutionInfo:(null==e||null===(n=e.data)||void 0===n?void 0:n.data)||{}})}})})),(0,g.Z)((0,m.Z)(t),"getUserInfoList",(function(){(0,t.props.dispatch)({type:"solutionManage/getUserInfoList",opt:{currentPage:1,pageSize:1e3,tenantId:t.state.tenantId},callback:function(e){var n,r;t.setState({userList:(null==e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.list)||[]})}})})),(0,g.Z)((0,m.Z)(t),"getProductLists",(function(){var e=t.props.dispatch;t.state.tenantId,e({type:"solutionManage/getProductLists",opt:{currentPage:1,pageSize:1e3},callback:function(e){var n,r;t.setState({productList:(null==e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.list)||[]})}})})),(0,g.Z)((0,m.Z)(t),"getGroupLists",(function(){var e=t.props.dispatch,n=t.state.tenantId;e({type:"solutionManage/getGroupLists",opt:{currentPage:1,pageSize:1e3,userId:sessionStorage.getItem("userId"),tenantId:n},callback:function(e){var n,r;t.setState({groupList:(null==e||null===(n=e.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.list)||[]})}})})),t.state={tenantId:sessionStorage.getItem("tenantId"),dataSource:{dataList:[],total:0,currentPage:1,pageSize:10},delSolutionVisible:!1,solutionInfo:{},showAddModal:!1,showEditModal:!1,groupList:[],userList:[],productList:[]},t}return(0,d.Z)(_,[{key:"componentDidMount",value:function(){this.searchFormRef.current.setFieldsValue({member:"all"}),this.searchSolutionList(this.searchFormRef.current.getFieldsValue()),this.getProductLists(),this.getGroupLists()}},{key:"showFormModal",value:function(e,t){"del"==e?this.setState({delSolutionVisible:!0,solutionInfo:t}):"add"==e&&this.setState({showAddModal:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.showEditModal,c=t.userList,u=t.productList,d=t.groupList,m=t.showAddModal,p=t.delSolutionVisible,f=t.dataSource,h=t.solutionInfo,g=[{title:"序号",key:"id",textWrap:"word-break",ellipsis:!0,render:function(e,t,n){return Z.createElement(Z.Fragment,null,Z.createElement("span",null,n+1))}},{title:"解决方案名称",dataIndex:"solverName",key:"solverName",textWrap:"word-break",ellipsis:!0},{title:"团队主管",dataIndex:"administratorName",key:"administratorName",textWrap:"word-break",ellipsis:!0},{title:"团队名称",dataIndex:"groupName",key:"groupName",textWrap:"word-break",ellipsis:!0},{title:"产品名称",dataIndex:"businessName",key:"businessName",textWrap:"word-break",ellipsis:!0},{title:"创建时间",dataIndex:"createdTime",key:"createdTime",textWrap:"word-break",ellipsis:!0,render:function(t,n){return Z.createElement(Z.Fragment,null,Z.createElement("span",null,e.timeShow(n.createdTime)))}},{title:"操作",key:"updatedTime",textWrap:"word-break",ellipsis:!0,render:function(t,n){return Z.createElement(Z.Fragment,null,Z.createElement(s.Z,{style:{marginLeft:"10px"},size:"small",type:"primary",onClick:function(){return e.getSolverInfo(n)}},"编辑"),Z.createElement(s.Z,{style:{marginLeft:"10px"},size:"small",type:"danger",onClick:function(){return e.showFormModal("del",n)}},"删除"))}}];return Z.createElement("div",{className:q("solution")},Z.createElement(o.Z,{className:q("searchForm"),title:"解决方管理"},Z.createElement(i.Z,(0,l.Z)({},{labelCol:{xs:{span:24},sm:{span:6},md:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18},md:{span:18}}},{ref:this.searchFormRef,layout:"inline",name:"control-ref",onFinish:this.searchSolutionList}),Z.createElement(i.Z.Item,{name:"solverName",label:"解决方名"},Z.createElement(v.Z,null)),Z.createElement(i.Z.Item,{name:"groupId",label:"团队名称"},Z.createElement(b.Z,{allowClear:!0,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return console.log(t,"ddd"),t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},null==d?void 0:d.map((function(e,t){return Z.createElement(z,{value:e.id,key:t},e.groupName)})))),Z.createElement(i.Z.Item,{name:"businessType",label:"产品名称"},Z.createElement(b.Z,{allowClear:!0,showSearch:!0},null==u?void 0:u.map((function(e,t){return Z.createElement(z,{value:e.serviceCode,key:t},e.serviceName)})))),Z.createElement(s.Z,{type:"primary",htmlType:"submit"},"查询"),Z.createElement(s.Z,{htmlType:"button",style:{margin:"0 8px"},onClick:this.onReset},"清空"))),Z.createElement(o.Z,{className:q("userLists")},Z.createElement(s.Z,{key:"submit",type:"primary",onClick:function(){return e.showFormModal("add")}},"添加"),Z.createElement(a.Z,{scroll:{x:!0},rowKey:function(e){return e.id},dataSource:f.dataList,columns:g,pagination:{total:f.total,onChange:this.changePage}})),Z.createElement(r.Z,{title:"删除解决方",visible:p,footer:[Z.createElement(s.Z,{key:"submit",type:"primary",onClick:this.handleDelSolver},"确认"),Z.createElement(s.Z,{onClick:this.handleCancel},"取消")],onOk:this.handleDelSolver,onCancel:this.handleCancel},Z.createElement("div",null,"即将删除",h.solverName,"!")),Z.createElement(O,{visible:m,onCancel:this.handleCancel,submitMap:this.handleAddSolver,Screening:this.Screening,cancelUserList:this.cancelUserList,currentData:h,userList:c,productList:u,groupList:d}),Z.createElement(j,{visible:n,onCancel:this.handleCancel,submitMap:this.handleEditSolver,Screening:this.Screening,cancelUserList:this.cancelUserList,currentData:h,userList:this.state.userList,productList:u,groupList:d}))}}]),_}(Z.Component))||D)},82757:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(23645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,'html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  font-family: "微软雅黑", "Arial", "华文细黑", "STHeiti", "MingLiu";\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmenu,\nnav,\nsection {\n  display: block;\n}\nbody {\n  line-height: 1;\n}\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: \'\';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\na {\n  color: #000;\n  text-decoration: none;\n}\na:hover {\n  color: #000;\n  text-decoration: none;\n}\n::-webkit-scrollbar-track {\n  background-color: transparent;\n}\n::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n}\n::-webkit-scrollbar-thumb {\n  background-color: #aaa;\n  border-radius: 10px;\n}\n#index-module__root___3KzJa {\n  height: 100%;\n}\n.index-module__box___2gP8G {\n  width: 100%;\n  display: flex;\n  height: 100%;\n  min-height: 92vh;\n  background-color: #f0f2f5;\n}\n.index-module__solution___3l1VU .ant-card {\n  margin: 20px;\n  border-radius: 7px;\n}\n.index-module__solution___3l1VU .searchForm .ant-form-inline .ant-form-item {\n  width: 260px;\n}\n.index-module__solution___3l1VU .userInfoModal {\n  width: 100%;\n}\n.index-module__solution___3l1VU .userInfoModal .ant-form-item {\n  width: 100%;\n  margin-bottom: 10px;\n}\n.index-module__solution___3l1VU .userInfoModal .ant-form-item .ant-form-item-label {\n  width: 100px;\n}\n.index-module__solution___3l1VU .index-module__userLists___1uTCB .index-module__addUserBtn___2TxBE {\n  float: right;\n}\n',""]),a.locals={root:"index-module__root___3KzJa",box:"index-module__box___2gP8G",solution:"index-module__solution___3l1VU",userLists:"index-module__userLists___1uTCB",addUserBtn:"index-module__addUserBtn___2TxBE"};const o=a}}]);